@page "/db/import-export"

<PageTitle>Database Import/Export</PageTitle>

<Modal @ref="_modal" IsScrollable="true">
	<BodyTemplate>
		<CustomList List="_errors"/>
	</BodyTemplate>
	<FooterTemplate>
		<ButtonOk Text="Ok" OnClick="@HideModal"/>
	</FooterTemplate>
</Modal>

<FormImportExportDb ShowModal="ShowModal"/>

@code {

	private Modal               _modal  = default!;
	private IEnumerable<string> _errors = Array.Empty<string>();

	private async Task ShowModal(ModalType modalType, string title, IEnumerable<string> errors) {
		_modal.ModalType = modalType;
		_modal.Title = title;
		_errors = errors;
		await _modal.ShowAsync();
	}

	private async Task HideModal() {
		await _modal.HideAsync();
	}

	protected override void OnInitialized() {
		ApiRequests.EnsureAuthentication(NavManager);
	}

}
