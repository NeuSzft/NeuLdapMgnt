@inherits LayoutComponentBase

<table class="table table-striped">
	<thead>
		<tr>
			<th class="user-select-none" role="button" @onclick="@(() => SortTable("Id"))">
				Id
				@if (sortBy == "Id")
				{
					<i class="bi @GetSortIcon(isAscending)"></i>
				}
				else
				{
					<i class="bi bi-chevron-expand"></i>
				}
			</th>
			<th class="user-select-none" role="button" @onclick="@(() => SortTable("Name"))">
				Name
				@if (sortBy == "Name")
				{
					<i class="bi @GetSortIcon(isAscending)"></i>
				}
				else
				{
					<i class="bi bi-chevron-expand"></i>
				}
			</th>
			<th class="user-select-none" role="button" @onclick="@(() => SortTable("Phone"))">
				Phone
				@if (sortBy == "Phone")
				{
					<i class="bi @GetSortIcon(isAscending)"></i>
				}
				else
				{
					<i class="bi bi-chevron-expand"></i>
				}
			</th>
		</tr>
	</thead>
	<tbody>
		@foreach (var teacher in Teachers)
		{
			<tr>
				<td>@teacher.Id</td>
				<td>@teacher.FirstName @teacher.LastName</td>
				<td>@(teacher.Phone)</td>
			</tr>
		}
	</tbody>
</table>

@code {
	[Parameter]
	public List<TeacherModel> Teachers { get; set; } = new();

	private string sortBy = "";
	private bool isAscending = true;

	private void SortTable(string propertyName)
	{
		if (sortBy == propertyName)
		{
			isAscending = !isAscending;
		}
		else
		{
			sortBy = propertyName;
			isAscending = true;
		}

		switch (propertyName)
		{
			case "Id":
				Teachers = isAscending 
				? Teachers
					.OrderBy(x => x.Id)
					.ToList() 
				: Teachers
					.OrderByDescending(x => x.Id)
					.ToList();
				break;

			case "Name":
				Teachers = isAscending 
				? Teachers
					.OrderBy(x => x.FirstName)
					.ThenBy(x => x.LastName)
					.ToList() 
				: Teachers
					.OrderByDescending(x => x.FirstName)
					.ThenByDescending(x => x.LastName)
					.ToList();
				break;

			case "Phone":
				Teachers = isAscending
				? Teachers
					.OrderBy(x => x.Phone)
					.ToList()
				: Teachers
					.OrderByDescending(x => x.Phone)
					.ToList();
				break;

			default:
				break;
		}
	}

	private string GetSortIcon(bool asc) => asc ? "bi-chevron-up" : "bi-chevron-down";
}

